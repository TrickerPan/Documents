# Nginx 多个子域名映射到不同的端口或 ip

> **场景介绍**
>
> 在部署 DevOps 环境时，多个服务通过 Docker 部署到一个服务器上，映射到不同的端口。  
> 现在每次访问，都要带上端口号，既不美观，也很麻烦。

## 一、思考过程

1. 如果不想带上端口号，就只能访问 80 或 443 端口。
2. 可以用过二级目录区分服务，通过反向代理转发到不同的 Server。
3. 可以用过子域名区分服务，通过反向代理转发到不同的 Server。

## 二、方案评估

1. 对于不带端口号访问，以我目前的经验来看，找不到其它更好的方法，只能使用 80 或 443 端口。
2. 使用二级目录区分服务，可行性很大。
    + 能通过二级目录名，明确区分服务。
    + 可是和直接使用端口号差别不大，只是把辨别服务的方法，从端口号变成了二级目录名。
    + 可能导致 url 过长。
    + 还是没有什么美观性。
3. 使用子域名区分服务，可行性与二级目录相差无几。
    + 能通过子域名，明确区分服务。
    + 具有一定的美观性。

## 三、方案明确 及 方案设计
